<?function is_user_logged_in(){	if (!isset($_SESSION['user']))		return false;	else return true;}function log_in_user($email, $password){	if (!is_email_valid($email)) return 'Некорректный адрес электронной почты';		if (strlen($password) < 6) return 'Пароль должен быть длинне 6 символов!';		$password = md5($email.SALT.$password); // !!!!!	$query = "SELECT * FROM users WHERE email = '$email' and password = '$password'";	$query = mysql_query($query);	$r = mysql_fetch_assoc($query);			//if (!$r) return 'Неправильно введен адрес электронной почты или пароль!';	if (!$r) return;			$_SESSION['user']['id'] = $r['id'];	$_SESSION['user']['email'] = $r['email'];	$_SESSION['user']['name'] = $r['name'];	$_SESSION['user']['address'] = $r['address'];	$_SESSION['user']['phone'] = $r['phone'];}function get_user_data($id){	$query = "SELECT * FROM users WHERE id = '$id'";	$query = mysql_query($query);	return mysql_fetch_assoc($query);}function log_out_user(){	unset($_SESSION['user']);}function update_user($id, $name, $address, $phone){	$query = "UPDATE users SET name = '$name', address = '$address', phone = '$phone' WHERE id = '$id'";	mysql_query($query);}// Создает запись в таблице administrators о новом администраторе и высылает письмо на указанную почту,// если все поля формы проходят проверку. Иначе - возвращается сообщение об ошибкеfunction register_user($email, $name, $address, $phone){	if (!is_email_valid($email)) return 'Некорректный адрес электронной почты';			$query = "SELECT * FROM users WHERE email = '".$email."'";	$query = mysql_query($query);	$r = mysql_fetch_assoc($query);		if ($r) return 'Пользователь с такой электронной почтой уже зарегистрирован!';		// ----------------------------------------------------------------------------------	$password = generate_password(6); 	//echo $password;	$m_password = md5($email.SALT.$password); // !!!!!		$query = "INSERT INTO users SET email = '$email', password = '$m_password', 		name = '$name', address = '$address', phone = '$phone'";	mysql_query($query);		// высылаем письмо}function restore_user_password($email){	if (!is_email_valid($email)) return 'Некорректный адрес электронной почты';			$query = "SELECT * FROM users WHERE email = '".$email."'";	$query = mysql_query($query);	$r = mysql_fetch_assoc($query);		if (!$r) return 'Пользователь с такой электронной почтой не зарегистрирован!';		// ----------------------------------------------------------------------------------	$password = generate_password(6); 	//echo $password;	$m_password = md5($email.SALT.$password); // !!!!!		$query = "UPSATE users SET password = '$m_password' WHERE email = '$email'";	mysql_query($query);		// высылаем письмо}function delete_user($id){	$query = "DELETE FROM users WHERE id = $id";	mysql_query($query);}?>